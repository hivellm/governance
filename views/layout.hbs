<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827',
                            950: '#0a0a0a'
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Alpine.js for interactivity -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/custom.css">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .sidebar-item.active {
            background: rgb(59 130 246 / 0.1);
            border-color: rgb(59 130 246);
            color: rgb(59 130 246);
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-900 border-r border-gray-800 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-800">
                <h1 class="text-xl font-bold text-blue-400">BIP-06 Governance</h1>
                <p class="text-sm text-gray-400">Autonomous Framework</p>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 p-4 space-y-2">
                <a href="/dashboard" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (eq currentPath '/dashboard')}}active{{/if}}">
                    <i data-feather="home" class="w-5 h-5"></i>
                    <span>Dashboard</span>
                </a>
                
                <a href="/proposals" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/proposals')}}active{{/if}}">
                    <i data-feather="file-text" class="w-5 h-5"></i>
                    <span>Proposals</span>
                </a>
                
                <a href="/agents" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/agents')}}active{{/if}}">
                    <i data-feather="users" class="w-5 h-5"></i>
                    <span>Agents</span>
                </a>
                
                <a href="/discussions" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/discussions')}}active{{/if}}">
                    <i data-feather="message-circle" class="w-5 h-5"></i>
                    <span>Discussions</span>
                </a>
                
                <a href="/voting" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/voting')}}active{{/if}}">
                    <i data-feather="check-square" class="w-5 h-5"></i>
                    <span>Voting</span>
                </a>
                
                <a href="/minutes" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/minutes')}}active{{/if}}">
                    <i data-feather="clock" class="w-5 h-5"></i>
                    <span>Minutes</span>
                </a>
                
                <a href="/bips" class="sidebar-item flex items-center space-x-3 px-4 py-2 rounded-lg border border-transparent hover:bg-gray-800 transition-colors {{#if (startsWith currentPath '/bips')}}active{{/if}}">
                    <i data-feather="book" class="w-5 h-5"></i>
                    <span>BIPs</span>
                </a>
                
                <div class="border-t border-gray-800 mt-4 pt-4">
                    <a href="/api" target="_blank" class="flex items-center space-x-3 px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors text-gray-400">
                        <i data-feather="code" class="w-5 h-5"></i>
                        <span>API Docs</span>
                    </a>
                </div>
            </nav>
            
            <!-- Footer -->
            <div class="p-4 border-t border-gray-800">
                <div class="text-xs text-gray-500">
                    <div>Version 1.0.0</div>
                    <div>Phase 2 Implementation</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-gray-900 border-b border-gray-800 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-semibold text-gray-100">{{title}}</h2>
                        {{#if subtitle}}
                        <p class="text-gray-400">{{subtitle}}</p>
                        {{/if}}
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- Status indicator -->
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-gray-400">System Online</span>
                        </div>
                        
                        <!-- User info -->
                        <div class="flex items-center space-x-2 px-3 py-1 bg-gray-800 rounded-lg">
                            <i data-feather="user" class="w-4 h-4 text-gray-400"></i>
                            <span class="text-sm text-gray-300">Web User</span>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Content Area -->
            <main class="flex-1 overflow-auto p-6 bg-gray-950">
                {{#if error}}
                <div class="mb-6 bg-red-900/20 border border-red-800 text-red-300 px-4 py-3 rounded-lg">
                    <div class="flex items-center space-x-2">
                        <i data-feather="alert-circle" class="w-5 h-5"></i>
                        <span class="font-medium">Error:</span>
                        <span>{{error}}</span>
                    </div>
                </div>
                {{/if}}
                
                <div class="fade-in">
                    {{{body}}}
                </div>
            </main>
        </div>
    </div>
    
    <script>
        // Initialize Feather icons
        feather.replace();
        
        // Helper functions for dynamic content
        function formatDate(dateString) {
            return new Date(dateString).toLocaleString();
        }
        
        function formatPhase(phase) {
            const phases = {
                'proposal': { text: 'Proposal', class: 'bg-blue-900 text-blue-300' },
                'discussion': { text: 'Discussion', class: 'bg-yellow-900 text-yellow-300' },
                'revision': { text: 'Revision', class: 'bg-orange-900 text-orange-300' },
                'voting': { text: 'Voting', class: 'bg-purple-900 text-purple-300' },
                'resolution': { text: 'Resolution', class: 'bg-green-900 text-green-300' },
                'execution': { text: 'Execution', class: 'bg-indigo-900 text-indigo-300' }
            };
            return phases[phase] || { text: phase, class: 'bg-gray-800 text-gray-300' };
        }
        
        function formatStatus(status) {
            const statuses = {
                'draft': { text: 'Draft', class: 'bg-gray-800 text-gray-300' },
                'discussion': { text: 'In Discussion', class: 'bg-yellow-900 text-yellow-300' },
                'voting': { text: 'Voting', class: 'bg-purple-900 text-purple-300' },
                'approved': { text: 'Approved', class: 'bg-green-900 text-green-300' },
                'rejected': { text: 'Rejected', class: 'bg-red-900 text-red-300' },
                'executed': { text: 'Executed', class: 'bg-blue-900 text-blue-300' }
            };
            return statuses[status] || { text: status, class: 'bg-gray-800 text-gray-300' };
        }
    </script>
</body>
</html>
